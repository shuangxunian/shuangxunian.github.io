---
title: nvm与pm2
excerpt: 两个比较简单但无关联的东西，只是写在一起图个方便。
date: 2023-03-31
categories:
- 技术文章
tags:
- pm2
- nvm
---
## nvm
当程序很多时，有新创建的有旧的好多年的，不同项目必须依赖不同版的 NodeJS 运行环境，我们不可能每换一个项目卸载重装node，所以我们需要一个能管理node版本的软件，即：nvm。

### 安装nvm
首先最重要的是：一定要卸载已安装的 NodeJS，否则会发生冲突。然后下载 nvm-windows 最新安装包，直接安装即可。

### 安装多版本 node/npm
安装最新版 Node
```
nvm install node
```

安装 14.15.0：
```
nvm install 14.15.0
```

nvm 遵守语义化版本命名规则。例如，你想安装最新的 14.15 系列的最新的一个版本的话，可以运行：
```
nvm install 14.15
```

nvm 会寻找 14.15.x 中最高的版本来安装。

你可以通过以下命令来列出远程服务器上所有的可用版本：
```
nvm ls available
```

### 在不同版本间切换
每当我们安装了一个新版本 Node 后，全局环境会自动把这个新版本设置为默认。nvm 提供了 nvm use 命令。这个命令的使用方法和 install 命令类似。例如，切换到 14.15.0：
```
nvm use 14.15.0
```

切换到最新的 14.15.x：
```
nvm use 14.15
```

切换到最新版：
```
nvm use node
```

## pm2
当我们需要一直启动一个服务的时候，比如说一个服务端，亦或一个实时接收信息并处理的机器人，我们可以通过 node 直接启动服务，但对于线上项目，如果直接通过 node app 来启动，因为 node 是单线程的，所以如果报错了可能会使项目直接停止，从而导致整个服务崩溃；亦或用云服务器，直接 node 启动后关闭标签页，项目是会直接退出的。因此我们需要新的管理工具：PM2。PM2是 node 进程管理工具，可以利用它来简化很多node应用管理的繁琐任务。

### 安装
```
npm install -g pm2
```

### 使用
```
# 启动
pm2 start app.js

# 显示所有进程信息；
pm2 list

# 重启所有进程
pm2 restart all

# 停止/删除所有进程
pm2 stop/delete all

# 显示所有进程的日志
pm2 logs

# 杀进程
pm2 kill
```





